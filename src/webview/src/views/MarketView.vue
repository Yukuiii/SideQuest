<script setup lang="ts">
import { onMounted } from "vue";
import { useRouter } from "vue-router";
import { marketState, requestRefresh, setupMarketBridge } from "../core/market/marketManager";

const router = useRouter();

function goBack() {
  router.push("/");
}

onMounted(() => {
  setupMarketBridge();
});
</script>

<template>
  <div class="flex h-full flex-col">
    <div class="flex items-center gap-2 border-b border-[var(--vscode-panel-border)] p-3">
      <button
        class="flex h-6 w-6 items-center justify-center rounded border-none bg-transparent text-[var(--vscode-foreground)] hover:bg-[var(--vscode-toolbar-hoverBackground)] cursor-pointer"
        @click="goBack"
        title="è¿”å›"
      >
        â†
      </button>
      <span class="flex-1 font-medium">ğŸ“ˆ æ“ç›˜æ‰‹</span>
      <button
        class="flex h-6 w-6 items-center justify-center rounded border-none bg-transparent text-[var(--vscode-foreground)] hover:bg-[var(--vscode-toolbar-hoverBackground)] cursor-pointer"
        @click="requestRefresh"
        title="åˆ·æ–°"
      >
        â†»
      </button>
    </div>

    <div class="flex flex-1 flex-col items-center justify-center gap-2 text-sm text-[var(--vscode-descriptionForeground)]">
      <div>åŠŸèƒ½å¼€å‘ä¸­...</div>
      <div>è‡ªé€‰æ•°ï¼š{{ marketState.quotes.length }}ï¼Œæœ€åæ›´æ–°ï¼š{{ marketState.lastUpdate ? new Date(marketState.lastUpdate).toLocaleTimeString() : "æš‚æ— " }}</div>
    </div>
  </div>
</template>
